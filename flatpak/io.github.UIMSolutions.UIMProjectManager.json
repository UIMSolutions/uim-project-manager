{
    "app-id": "io.github.UIMSolutions.UIMProjectManager",
    "runtime": "org.gnome.Platform",
    "runtime-version": "46",
    "sdk": "org.gnome.Sdk",
    "command": "uim-project-manager",
    "finish-args": [
        "--share=ipc",
        "--socket=fallback-x11",
        "--socket=wayland",
        "--device=dri",
        "--filesystem=xdg-documents"
    ],
    "cleanup": [
        "/include",
        "/lib/pkgconfig",
        "/share/man",
        "*.a"
    ],
    "modules": [
        {
            "name": "dmd",
            "buildsystem": "simple",
            "build-commands": [
                "install -Dm755 linux/bin64/dmd /app/bin/dmd",
                "cp -r linux/lib64/* /app/lib/",
                "cp -r src/druntime/import/* /app/include/d/druntime/",
                "cp -r src/phobos/* /app/include/d/phobos/"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://downloads.dlang.org/releases/2.x/2.111.0/dmd.2.111.0.linux.tar.xz",
                    "sha256": "c89ca5ab8ccec8daebadcbe5ebe59fe508e00ab8d9dcbd6f029e3ed3c7e6fccb"
                }
            ]
        },
        {
            "name": "dub",
            "buildsystem": "simple",
            "build-commands": [
                "DMD=/app/bin/dmd ./build.sh",
                "install -Dm755 bin/dub /app/bin/dub"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/dlang/dub/archive/refs/tags/v1.38.1.tar.gz",
                    "sha256": "a7c9a2f819fdea7359f298cba76e81a24ca1536d756c3b4b98c2480463c37907"
                }
            ]
        },
        {
            "name": "uim-project-manager",
            "buildsystem": "simple",
            "build-commands": [
                "dub build --build=release --compiler=/app/bin/dmd",
                "install -Dm755 uim-project-manager /app/bin/uim-project-manager",
                "install -Dm644 io.github.UIMSolutions.UIMProjectManager.desktop /app/share/applications/io.github.UIMSolutions.UIMProjectManager.desktop",
                "install -Dm644 io.github.UIMSolutions.UIMProjectManager.metainfo.xml /app/share/metainfo/io.github.UIMSolutions.UIMProjectManager.metainfo.xml"
            ],
            "sources": [
                {
                    "type": "dir",
                    "path": ".."
                }
            ]
        }
    ]
}
